# 💊 MemoryCapsule

타임캡슐 생성 후 친구들을 초대해 사진과 이야기를 공유하고, 지정된 날짜에 합쳐진 컨텐츠를 모두에게 전송하는 플랫폼

<br>
Medium:

<hr style="border: none; border-top: 3px solid grey;">
<br>

## Features


<hr>


## Login
<img src="./readme_image/readme-login.gif" title=""/>

<br>

## Main Page
#### Create Capsule
<img src="./readme_image/ezgif.com-video-to-gif.gif" title=""/>
메인 페이지에서 캡슐을 생성할 수 있습니다.

<br>
<br>

## Unopened Capsule
개봉일이 지나지 않은 캡슐에서는 스토리를 추가하여 추억을 저장할 수 있습니다.
캡슐에는 친구를 추가하여 스토리를 나눌 수 있습니다. 단 개봉일 전까지는 자신이 올린 스토리의 내용만 확인 가능합니다.

#### Create Story

<img src="./readme_image/ezgif.com-video-to-gif (1).gif" title=""/>

<hr>
<br>


#### Invitation

<img src="./readme_image/ezgif.com-video-to-gif (2).gif" title=""/>

<img src="./readme_image/ezgif.com-video-to-gif (3).gif" title=""/>

<br>

## Opened Capsule

개봉일이 지난 캡슐에서는 사진 페이지와 비디오 페이지를 선택할 수 있습니다

사진 페이지는 캡슐 생성 때 선택한 테마에서 스토리들을 확인할 수 있습니다.<br/>
영상 페이지에서는 스토리의 사진으로 제작된 비디오를 확인할 수 있습니다. 이후에 스토리를 선택하여 추가 비디오 제작이 가능합니다
<br>

<img src="./readme_image/ezgif.com-video-to-gif (4).gif" title=""/>

<hr>
<br>
<br>

## 💻 System Architecture
<img src="./readme_image/system.png" title=""/>

<hr>
<br>
<br>

## 💡 Tech Stack

| Area       | Tech Stack                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ---------- |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Frontend   | <img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white"> <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white"> <img src="https://img.shields.io/badge/vite-646CFF?style=for-the-badge&logo=vite&logoColor=white"> <img src="https://img.shields.io/badge/tailwind css-06B6D4?style=for-the-badge&logo=tailwind css&logoColor=white"> <img src="https://img.shields.io/badge/prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white"> <img src="https://img.shields.io/badge/eslint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white"> <img src="https://img.shields.io/badge/recoil-3578E5?style=for-the-badge&logo=recoil&logoColor=white">                                                                                                                                                                                                                                                                                                                 |
| Backend    | <img src="https://img.shields.io/badge/django-092E20?style=for-the-badge&logo=django&logoColor=white"> <img src="https://img.shields.io/badge/rabbitmq-FF6600?style=for-the-badge&logo=rabbitmq&logoColor=white"> <img src="https://img.shields.io/badge/celery-37814A?style=for-the-badge&logo=celery&logoColor=white"> <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> <img src="https://img.shields.io/badge/amazon s3-569A31?style=for-the-badge&logo=amazons3&logoColor=white"> <img src="https://img.shields.io/badge/amazon rds-527FFF?style=for-the-badge&logo=amazon rds&logoColor=white"> <img src="https://img.shields.io/badge/redis-DC382D?style=for-the-badge&logo=redis&logoColor=white"> <img src="https://img.shields.io/badge/opencv-5C3EE8?style=for-the-badge&logo=opencv&logoColor=white"> <img src="https://img.shields.io/badge/numpy-013243?style=for-the-badge&logo=numpy&logoColor=white"> <img src="https://img.shields.io/badge/moviepy-000000?style=for-the-badge&logo=moviepy&logoColor=white"> |
| DevOps     | <img src="https://img.shields.io/badge/nginx-009639?style=for-the-badge&logo=nginx&logoColor=white"> <img src="https://img.shields.io/badge/gunicorn-499848?style=for-the-badge&logo=gunicorn&logoColor=white"> <img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white"> <img src="https://img.shields.io/badge/github actions-2088FF?style=for-the-badge&logo=github actions&logoColor=white"> <img src="https://img.shields.io/badge/amazon ec2-FF9900?style=for-the-badge&logo=amazon ec2&logoColor=white">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Monitoring | <img src="https://img.shields.io/badge/prometheus-E6522C?style=for-the-badge&logo=prometheus&logoColor=white"> <img src="https://img.shields.io/badge/grafana-F46800?style=for-the-badge&logo=grafana&logoColor=white"> <img src="https://img.shields.io/badge/k6-7D64FF?style=for-the-badge&logo=k6&logoColor=white"> <img src="https://img.shields.io/badge/cadvisor-005571?style=for-the-badge&logo=cadvisor&logoColor=white"> <img src="https://img.shields.io/badge/node exporter-2496ED?style=for-the-badge&logo=node exporter&logoColor=white"> <img src="https://img.shields.io/badge/elastic stack-005571?style=for-the-badge&logo=elastic stack&logoColor=white">                                                                                                                                                                                                                                                                                                                                                                                                        |
| etc        | <img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"> <img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white"> <img src="https://img.shields.io/badge/figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white"> <img src="https://img.shields.io/badge/postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white"> <img src="https://img.shields.io/badge/swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=white"> <img src="https://img.shields.io/badge/gitkraken-179287?style=for-the-badge&logo=gitkraken&logoColor=white"> <img src="https://img.shields.io/badge/visual studio code-007ACC?style=for-the-badge&logo=visual studio code&logoColor=white"> <img src="https://img.shields.io/badge/pycharm-000000?style=for-the-badge&logo=pycharm&logoColor=white">                                                                                                                                                                                            |
<hr>
<br>
<br>

## 💽 ERD
<img src="./readme_image/erd.png" title=""/>Z

<hr>
<br>
<br>

## 📈 API
swagger를 사용하여 API 명세서를 작성 하였습니다.
<hr>

### user
<img src="./readme_image/user.png" title=""/>

### capsule
<img src="./readme_image/capsule.png" title=""/>

### story
<img src="./readme_image/story.png" title=""/>

### video
<img src="./readme_image/video.png" title=""/>

<hr>


<br>
<br>

## 📚 Asynchronous
비교적 시간이 많이 걸리는 비디오 생성 작업은 Celery를 활용하여 비동기 처리됩니다. <br/>

<img src="./readme_image/celery.png" title=""/>


<br>
<br>

## 📊 Monitoring
Grafana + Prometheus ELK
<hr>
Prometheus로 Django 매트릭을 수집하여 request,response를 분석하여 시각화 하였고 
node exporter를 통해 서버의 메모리, cpu 사용량, network traffic 등을 분석하여 시각화 하였습니다.

또한 ELK를 활용하여 Nginx log를 수집해 요청별 횟수나 응답코드 등을 자세히 모니터링 할 수 있게 구성 하였습니다.

alertmanager 기능을 활용하여 cpu 과부하가 오거나 설정해 놓은 instance가 예상치 못하게 종료될 경우
slack으로 알림을 보내 실시간으로 처리할 수 있게 하였습니다.

<hr>

### Django

<img src="./readme_image/django.png" title=""/>

### Node exporter
<img src="./readme_image/node_exporter.png" title=""/>

### ELK
<img src="./readme_image/elk.png" title=""/>

<hr>
<br>
<br>

## 🎥 Video
비디오 제작에는 OpenCV, NumPy, MoviePy가 사용 됩니다.

<hr>

<img src="./readme_image/video_make.png" title=""/>
<br> 

캡슐이 개봉되면 유저가 추가한 이미지는 opencv가 다운로드 받습니다. 다운로드 받아진 이미지들은 numpy를 통해 이미지를 균일하게 resize하고, 색상 처리 작업을 진행합니다. 이후 처리 완료된 
이미지는 MoviePy를 통해 mp3 파일과 합쳐지면서 영상 제작이 완료 됩니다.

<br>
<br>

## 👨‍👩‍👧‍👦 Team


| Name    | 박경은                                                                      | 김성훈                                                                     | 김윤아                                                                | 정재빈                                                                   | 유재윤                                                                       | 이민기                                                                       |
| ------- |--------------------------------------------------------------------------| -------------------------------------------------------------------------- | --------------------------------------------------------------------- |-----------------------------------------------------------------------|---------------------------------------------------------------------------|---------------------------------------------------------------------------|
| Profile | <img src="./readme_image/gyeong.png" width="100" height="100" title=""/> | <img src="./readme_image/sunghoon.png" width="100" height="100" title=""/> | <img src="./readme_image/yun.png" width="100" height="100" title=""/> | <img src="./readme_image/jae.png" width="100" height="100" title=""/> | <img src="./readme_image/jaeyoon.png" width="100" height="100" title=""/> | <img src="./readme_image/min.png" width="100" height="100" title=""/>     |
| role    | Leader <br/> Frontend                                                    | Frontend                                                                   | Frontend                                                              | Backend <br> DevOps                                                   | Backend <br> DevOps                                                       | Backend <br> DevOps                                                       |
| GitHub  | [@devGEP](https://github.com/devGEP)                                     | [@koreaGorilla](https://github.com/koreaGorilla)                           | [@1-yuna](https://github.com/1-yuna)                                  | [@JaeBin2019](https://github.com/JaeBin2019)                          | [@yoojaeyoonGit](https://github.com/yoojaeyoonGit)                        | [@kiminni](https://github.com/kiminni)                                    |
